include:
  - local: .gitlab-ci/build-ci-image.yml
  - local: .gitlab-ci/build-test-lint.yml
  - local: .gitlab-ci/build-test-lint-all.yml
  - local: .gitlab-ci/build-test-lint-packages.yml
  - local: .gitlab-ci/test-screenshot.yml
  - local: .gitlab-ci/deploy.yml

# NOTE: The numerical suffix in the image string refers to the version of the docker image
# this number will need to be incremented (i.e. 1.1 to 1.2), when changes to a package
# require a new docker image to be consistently pulled.
variables:
  STABLE_IMAGE: "docker.corp.pingidentity.com:5000/testing/ui-library-admin:1.4.0"
  LATEST_IMAGE: "docker.corp.pingidentity.com:5000/testing/pingux-latest:1.4.0"
  GITHUB_IMAGE: "docker.corp.pingidentity.com:5000/testing/astro-github:1.0.0"
  KUBERNETES_MEMORY_REQUEST: "250Mi"
  KUBERNETES_MEMORY_LIMIT: "16000Mi"

stages:
  - build-ci-image
  - build-test-lint
  - screenshot
  - deploy
