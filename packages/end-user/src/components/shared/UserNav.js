import React from 'react';
import PropTypes from 'prop-types';
import classnames from 'classnames';
import { Tabs } from './TabbedSections';
import PopOverNavMenu from '../Tooltip/PopoverNavMenu';
import Link from './Link';


const MENU_OPEN_CLASSNAME = 'menu-open';

export const imageSizes = {
    SMALL: "small",
    MEDIUM: "medium",
    LARGE: "large",
};

export const UserInfo = ({
    imageSize,
    imageSrc,
    name,
    className,
}) => {
    const size = classnames({
        'user-info__image--small': imageSize === imageSizes.SMALL,
        'user-info__image--medium': imageSize === imageSizes.MEDIUM,
        'user-info__image--large': imageSize === imageSizes.LARGE,
    });

    return(
        <div className={classnames("user-info", className)}>
            {
                imageSrc
                    ? (<div
                        className={classnames("user-info__image", size)}
                        style={{ backgroundImage: `url(${imageSrc})` }}
                    />)
                    : <span className={classnames("user-info__icon", size)} />
            }
            <span className="truncate">{name}</span>
        </div>
    );
};

const pingLogo = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHZpZXdCb3g9IjAgMCA1MiA1MiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5waW5nLWxvZ288L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJMb2dvcy0vLVBpbmctTG9nbyI+ICAgICAgICAgICAgPGcgaWQ9IlBJQ19zcXVhcmVfbG9nb19QSUNfcmVkX1JHQiI+ICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJGaWxsLTEiIGZpbGw9IiNBNjI3MzIiIHBvaW50cz0iMCA1MS45ODk4MzcxIDUxLjk3MTAzNTggNTEuOTg5ODM3MSA1MS45NzEwMzU4IDAuMDI4OTY0MTY5NCAwIDAuMDI4OTY0MTY5NCI+PC9wb2x5Z29uPiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjQuNjQ5MzU1LDQxLjMyNjI4MDEgTDI1LjQxNjE0MzMsNDEuMTk4MjI4IEwyNS40MTYxNDMzLDQ2LjQxNTMzNTUgTDI0LjY0OTM1NSw0Ni40MTUzMzU1IEwyNC42NDkzNTUsNDEuMzI2MjgwMSBaIE0yNy42NTcyMjQ4LDQxLjkxNTU1NyBMMjcuNjU3MjI0OCw0NS4yMDU0NDYzIEMyNy42NTcyMjQ4LDQ1Ljc2OTMxNiAyNy43OTk1MDQ5LDQ1Ljk2NDI3MzYgMjguMjYzNDM5Nyw0NS45NjQyNzM2IEMyOC40NzIxMTczLDQ1Ljk2NDI3MzYgMjguNDE3MDY4NCw0NS45NjY2NDUgMjguNTUwMDMyNiw0NS44OTQ2NTggTDI4LjY1NDU0MDcsNDYuNDA3Mzc0NiBDMjguNDE3MDY4NCw0Ni41NCAyOC4zMjk2Njc4LDQ2LjU3ODQ0OTUgMjcuOTk4MDE5NSw0Ni41Nzg0NDk1IEMyNy43NTE3Mzk0LDQ2LjU3ODQ0OTUgMjcuNTYyNTQwNyw0Ni41Mjc4MDQ2IDI3LjM4MjE0OTgsNDYuNDM1NDkxOSBDMjcuMDUxMDA5OCw0Ni4yNjEzNjgxIDI2LjkyNzg2OTcsNDUuOTMzNDQ2MyAyNi45Mjc4Njk3LDQ1LjQyMDU2MDMgTDI2LjkyNzg2OTcsNDEuOTE1NTU3IEwyNi4zMTIsNDEuOTE1NTU3IEwyNi4zMTIsNDEuMzExMDM1OCBMMjYuOTI3ODY5Nyw0MS4zMTEwMzU4IEwyNi45Mjc4Njk3LDM5LjM3Njg3MyBMMjcuNjg2MDE5NSwzOS4zNzY4NzMgTDI3LjY4NjAxOTUsNDEuMzExMDM1OCBMMjguODcwMzMyMiw0MS4zMTEwMzU4IEwyOC42NDMwMjI4LDQxLjkxNTU1NyBMMjcuNjU3MjI0OCw0MS45MTU1NTcgWiBNMjkuMjc0ODE0MywyNy41NzExNzkyIEMyOC42Mzk5NzM5LDI3LjU3MTE3OTIgMjcuODE1NDI2NywyOC4wMjAzNzc5IDI3LjA4NTA1NTQsMjguNzE3MjExNyBMMjcuMDg1MDU1NCwzNy43NDY3NDkyIEwyMy45MjU5MjgzLDM3Ljc0Njc0OTIgTDIzLjkyNTkyODMsMjguNDkyNjEyNCBDMjMuOTI1OTI4MywyNy4zOTUxOTIyIDIzLjc4NDMyNTcsMjYuMzQ3NzM5NCAyMy41MDIzMDYyLDI1LjQ5OTY0ODIgTDI2LjMwNTM5NDEsMjQuNjUyNTczMyBDMjYuNTg5MTA3NSwyNS4xNzY4MDc4IDI2Ljc1MzkxNTMsMjUuNzI0NTg2MyAyNi43NTM5MTUzLDI2LjI0ODE0MzMgQzI3LjIyNDc5NDgsMjUuODk4MjAyIDI3LjYyNTcxOTksMjUuNTk4OTA1NSAyOC4xNDQ1MzQyLDI1LjMwMDI4NjYgQzI4Ljc4MDM5MDksMjQuOTUxODY5NyAyOS42MDU5NTQ0LDI0Ljc1MjY3NzUgMzAuMzExOTM0OSwyNC43NTI2Nzc1IEMzMS42NTU0NjU4LDI0Ljc1MjY3NzUgMzIuODMzNjgwOCwyNS40OTk2NDgyIDMzLjIxMDM4NDQsMjYuNTk4MjU0MSBDMzMuMzc1MTkyMiwyNy4wNzE2NzQzIDMzLjQ0NjMzMjIsMjcuNjE5OTYwOSAzMy40NDYzMzIyLDI4LjQxODI1NDEgTDMzLjQ0NjMzMjIsMzcuNzQ2NzQ5MiBMMzAuMzM0ODAxMywzNy43NDY3NDkyIEwzMC4zMzQ4MDEzLDI5LjQ0MDgwNzggQzMwLjMzNDgwMTMsMjcuOTk0ODAxMyAzMC4xMDAwMzkxLDI3LjU3MTE3OTIgMjkuMjc0ODE0MywyNy41NzExNzkyIFogTTM4LjI3ODA5NzcsMjkuMDkxODgyNyBDMzguMjc4MDk3NywyNy44OTUzNzQ2IDM4Ljk2MTg4OTMsMjcuMTk1ODMwNiA0MC4xNjMxNDAxLDI3LjE5NTgzMDYgQzQxLjM2NjU5MjgsMjcuMTk1ODMwNiA0Mi4wNzI3NDI3LDI3Ljg5NTM3NDYgNDIuMDcyNzQyNywyOS4wOTE4ODI3IEM0Mi4wNzI3NDI3LDMwLjI2NDE2OTQgNDEuMzg5NDU5MywzMC45MTIwNTIxIDQwLjEzOTkzNDksMzAuOTEyMDUyMSBDMzkuMDMyMzUxOCwzMC45MTIwNTIxIDM4LjI3ODA5NzcsMzAuMzg5MTcyNiAzOC4yNzgwOTc3LDI5LjA5MTg4MjcgWiBNNDEuMzY2NTkyOCwzNC40NzkzODc2IEwzOS42NjkwNTU0LDM0LjQ1NDQ4ODYgQzM5LjMzODU5MjgsMzQuNDU0NDg4NiAzOS4xNTEwODc5LDM0LjMyOTE0NjYgMzkuMTUxMDg3OSwzNC4xNTQ1MTQ3IEMzOS4xNTEwODc5LDMzLjgwNjA5NzcgMzkuNTk4NzYyMiwzMy41MDcxNDAxIDQwLjM5OTI1NzMsMzMuMTA3MDYxOSBDNDAuNjM0MTg4OSwzMy4xMzI2Mzg0IDQwLjcyODUzNDIsMzMuMTMyNjM4NCA0MC44NzA0NzU2LDMzLjEzMjYzODQgQzQzLjQzODk3MDcsMzMuMTMyNjM4NCA0NS4zMjU3MDY4LDMxLjUzNDg2NjQgNDUuMzI1NzA2OCwyOS4zNDA3MDM2IEM0NS4zMjU3MDY4LDI4LjQ5MjYxMjQgNDUuMDg4MDY1MSwyNy44NDM1NDQgNDQuNjE2Njc3NSwyNy4yNDY5ODM3IEM0NC44MDUxOTg3LDI3LjI3MTg4MjcgNDUuMTM2MzM4OCwyNy4zMjA2NjQ1IDQ1LjQ0MjkxODYsMjcuMzIwNjY0NSBDNDYuMzE0NTUzNywyNy4zMjA2NjQ1IDQ2Ljk3MzEwNzUsMjcuMDQ1OTI4MyA0Ny42NTc0MDcyLDI2LjM3MjYzODQgTDQ2LjMzODA5NzcsMjQuMjUyMzI1NyBDNDUuNjA3MDQ4OSwyNC45NTE4Njk3IDQ0LjcxMTUzMDksMjUuMzUwOTMxNiA0My44Mzk4OTU4LDI1LjM1MDkzMTYgQzQzLjQzODk3MDcsMjUuMzUwOTMxNiA0My4wMTM5OTM1LDI1LjI0OTgxMTEgNDIuMzU1NjA5MSwyNS4wNzU4NTY3IEM0MS40ODI5NTc3LDI0Ljg1MjI3MzYgNDAuODcwNDc1NiwyNC43NTI2Nzc1IDQwLjE4NzAyMjgsMjQuNzUyNjc3NSBDMzcuMTAxMDY4NCwyNC43NTI2Nzc1IDM1LjA5NzYyODcsMjYuNDQ4MzUxOCAzNS4wOTc2Mjg3LDI5LjA2NzMyMjUgQzM1LjA5NzYyODcsMzAuOTYyMTg4OSAzNS45NDUzODExLDMyLjEzNDQ3NTYgMzcuNjg5NDk4NCwzMi42MDkwODE0IEMzNS43MDkyNjM4LDMzLjE1NjUyMTIgMzUuNDc0NjcxLDMzLjkzMTI3MDQgMzUuNDc0NjcxLDM0Ljc1Mzc4NSBDMzUuNDc0NjcxLDM1LjYyNzExNCAzNS44MjY5ODM3LDM2LjIwMDEzMDMgMzYuMzkzMzk0MSwzNi40MjM4ODI3IEMzNi45NTk4MDQ2LDM2LjY3NDM5NzQgMzcuODc4MTg4OSwzNi43OTczNjgxIDM5LjI5MTUwNDksMzYuODIzMjgzNCBMNDAuNjM0MTg4OSwzNi44NDg1MjEyIEM0MS44ODQ1NjAzLDM2Ljg3MzQyMDIgNDIuODQ5NjkzOCwzNy4yMjM1MzA5IDQyLjg0OTY5MzgsMzguMzY5OTAyMyBDNDIuODQ5NjkzOCwzOC44OTQxMzY4IDQyLjU0Mzc5MTUsMzkuMzY3Mzg3NiA0Mi4wNzI3NDI3LDM5LjY2NjM0NTMgQzQxLjU3ODY1OCwzOS45OTE3MjY0IDQwLjg5NDY5NzEsNDAuMDg5NjI4NyA0MC4wOTQwMzI2LDQwLjA4OTYyODcgQzM4LjYzMzEyMDUsNDAuMDg5NjI4NyAzNy44MzAwODQ3LDM5LjU0MjE4ODkgMzcuODMwMDg0NywzOC41MTg2MTg5IEMzNy44MzAwODQ3LDM4LjE2OTg2MzIgMzcuODU0MzA2MiwzNy45OTY1ODYzIDM3Ljk3Mjg3MywzNy42OTY5NTExIEwzNS4wNTA1NDA3LDM3LjY5Njk1MTEgQzM0LjkzMjE0MzMsMzcuOTQ1NDMzMiAzNC43NjgxODI0LDM4LjI5NTg4MjcgMzQuNzY4MTgyNCwzOC45OTQ0MTA0IEMzNC43NjgxODI0LDM5Ljg2NTM2ODEgMzUuMDk3NjI4Nyw0MC42MTUyMTgyIDM1Ljc1NzcwNjgsNDEuMjYyOTMxNiBDMzYuODQxMDY4NCw0Mi4zMzU5NjA5IDM4LjYwOTIzNzgsNDIuNjM0NTc5OCA0MC4zMjc5NDc5LDQyLjYzNDU3OTggQzQyLjIxMjY1MTUsNDIuNjM0NTc5OCA0NC4wMjg3NTU3LDQyLjE4NjczNjIgNDUuMDg4MDY1MSw0MC45ODg1MzQyIEM0NS43NDg4MjA4LDQwLjI0MDg4NiA0Ni4wNTU3Mzk0LDM5LjQxODM3MTMgNDYuMDU1NzM5NCwzOC4zNDYwMTk1IEM0Ni4wNTU3Mzk0LDM3LjE5Nzk1NDQgNDUuNzI0NTk5MywzNi4zMjQ5NjQyIDQ1LjAxODQ0OTUsMzUuNjI3MTE0IEM0NC4xNjkzNDIsMzQuODAyOTA1NSA0My4yMDM1MzA5LDM0LjUwMzk0NzkgNDEuMzY2NTkyOCwzNC40NzkzODc2IFogTTMzLjczMTU3LDQ2LjI2MjM4NDQgQzMzLjQzNzAxNjMsNDYuMjYyMzg0NCAzMy4xOTkwMzU4LDQ2LjAxMDE3NTkgMzMuMTk5MDM1OCw0NS42NjE0MjAyIEMzMy4xOTkwMzU4LDQ1LjMxMjMyNTcgMzMuNDM3MDE2Myw0NS4wNjA0NTYgMzMuNzMxNTcsNDUuMDYwNDU2IEMzNC4wMjYyOTMyLDQ1LjA2MDQ1NiAzNC4yNjQ0NDMsNDUuMzEyMzI1NyAzNC4yNjQ0NDMsNDUuNjYxNDIwMiBDMzQuMjY0NDQzLDQ2LjAxMDE3NTkgMzQuMDI2MjkzMiw0Ni4yNjIzODQ0IDMzLjczMTU3LDQ2LjI2MjM4NDQgWiBNMzMuNzMxNTcsNDQuOTE1NDY1OCBDMzMuMzQzNjg3Myw0NC45MTU0NjU4IDMzLjAyNzExNCw0NS4yNTAzMzIyIDMzLjAyNzExNCw0NS42NjE0MjAyIEMzMy4wMjcxMTQsNDYuMDcyMTY5NCAzMy4zNDM2ODczLDQ2LjQwNjY5NzEgMzMuNzMxNTcsNDYuNDA2Njk3MSBDMzQuMTIwMTMwMyw0Ni40MDY2OTcxIDM0LjQzNjAyNjEsNDYuMDcyMTY5NCAzNC40MzYwMjYxLDQ1LjY2MTQyMDIgQzM0LjQzNjAyNjEsNDUuMjUwMzMyMiAzNC4xMjAxMzAzLDQ0LjkxNTQ2NTggMzMuNzMxNTcsNDQuOTE1NDY1OCBaIE0zMy42MDg5MzgxLDQ1LjU5NzM5NDEgTDMzLjYwODkzODEsNDUuMzU1NTE3OSBMMzMuNzQxMjI0OCw0NS4zNTU1MTc5IEMzMy44MTc2MTU2LDQ1LjM1NTUxNzkgMzMuOTAzNDkxOSw0NS4zNzE3Nzg1IDMzLjkwMzQ5MTksNDUuNDcxMDM1OCBDMzMuOTAzNDkxOSw0NS41ODQ2OTA2IDMzLjgyNzQzOTcsNDUuNTk3Mzk0MSAzMy43Mzk1MzA5LDQ1LjU5NzM5NDEgTDMzLjYwODkzODEsNDUuNTk3Mzk0MSBaIE0zNC4wNTE4Njk3LDQ1LjQ4MzkwODggQzM0LjA1MTg2OTcsNDUuMzA2MDU4NiAzMy45NDgyMDg1LDQ1LjIzNTc2NTUgMzMuNzU2ODA3OCw0NS4yMzU3NjU1IEwzMy40NjA1NjAzLDQ1LjIzNTc2NTUgTDMzLjQ2MDU2MDMsNDYuMDgxMTQ2NiBMMzMuNjA4OTM4MSw0Ni4wODExNDY2IEwzMy42MDg5MzgxLDQ1LjcxNzE0NjYgTDMzLjY5ODM3MTMsNDUuNzE3MTQ2NiBMMzMuOTA1MTg1Nyw0Ni4wODExNDY2IEwzNC4wNTc0NTkzLDQ2LjA4MTE0NjYgTDMzLjg0MzE5MjIsNDUuNzExMjE4MiBDMzMuOTczNzg1LDQ1LjY5ODE3NTkgMzQuMDUxODY5Nyw0NS42MjgyMjE1IDM0LjA1MTg2OTcsNDUuNDgzOTA4OCBaIE0zMy40MTM4MTExLDQxLjMxMTAzNTggTDMxLjc5Mzg1MDIsNDYuNTk5MTE0IEMzMS40NzE2ODczLDQ3LjYyNDcxNjYgMzEuMDkyNDQzLDQ4LjMwMDg4NiAzMC4yNjg1NzMzLDQ4LjUxNjMzODggTDMwLjA1MDU3OTgsNDcuOTczMTMzNiBDMzAuNTExODA0Niw0Ny44MTY3OTQ4IDMwLjc1MzY4MDgsNDcuNTg5NDg1MyAzMC45NTUwNzQ5LDQ3LjAzNDA4NDcgQzMwLjg3OTM2MTYsNDYuNjMxMjk2NCAzMC44MzY1MDgxLDQ2LjQ1NjE1NjQgMzAuODM2NTA4MSw0Ni40NTYxNTY0IEMzMC43ODAxMDQyLDQ2LjEyODIzNDUgMzAuNTI0LDQ1LjEzMzQ1OTMgMzAuMzYzMDg3OSw0NC42MjE0MjAyIEwyOS4zNDg2NjQ1LDQxLjQyMzg0MzYgTDMwLjA3OTAzNTgsNDEuMTU2NzI5NiBMMzEuMDQ1NTI0NCw0NC40NjcyODM0IEMzMS4xODcyOTY0LDQ0Ljk0OTY4MDggMzEuMzI5MjM3OCw0NS43MzgzMTkyIDMxLjMyOTIzNzgsNDUuNzM4MzE5MiBMMzEuMzQ4NTQ3Miw0NS43MzgzMTkyIEMzMS4zNDg1NDcyLDQ1LjczODMxOTIgMzEuNTI4MDkxMiw0NS4wODI2NDUgMzEuNjQyMjU0MSw0NC42NjI1Nzk4IEwzMi41NzAyOTMyLDQxLjMxMTAzNTggTDMzLjQxMzgxMTEsNDEuMzExMDM1OCBaIE0xMC41OTc0OTg0LDQ1LjExMzMwMjkgQzEwLjU5NzQ5ODQsNDUuMTEzMzAyOSAxMC41MTE5NjA5LDQ1LjMyODU4NjMgMTAuMzEzMTA3NSw0NS40ODI1NTM3IEMxMC4wMDk1NzY1LDQ1LjcxNzgyNDEgOS43OTE1ODMwNiw0NS44MTAzMDYyIDkuNDA0MDM5MDksNDUuODEwMzA2MiBDOC45NjgwNTIxMiw0NS44MTAzMDYyIDguNjc0MDA2NTEsNDUuNjM2MTgyNCA4LjQ1NjM1MTc5LDQ1LjIxNTc3ODUgQzguMzA0NDE2OTQsNDQuOTE4ODUzNCA4LjI2NjgxNDMzLDQ0LjQ3Nzc4NSA4LjI2NjgxNDMzLDQzLjg4MzI1NzMgQzguMjY2ODE0MzMsNDMuMTY1OTI4MyA4LjM0MjE4ODkzLDQyLjc5NzE4NTcgOC41Njk4MzcxMyw0Mi40MDc2MDkxIEM4Ljc2ODg1OTkzLDQyLjA1OTE5MjIgOS4wODEzNjgwOCw0MS44NzQ3MzYyIDkuNDUxNDY1OCw0MS44NzQ3MzYyIEMxMC4wMDk1NzY1LDQxLjg3NDczNjIgMTAuMzYwODczLDQyLjA0OTM2ODEgMTAuNTk3NDk4NCw0Mi40MDc2MDkxIEwxMC41OTc0OTg0LDQ1LjExMzMwMjkgWiBNMTEuMzQ1OTkzNSwzOS4zNzY4NzMgTDEwLjYwNjgxNDMsMzkuMzc2ODczIEwxMC42MDY4MTQzLDQxLjA3NTc2NTUgQzEwLjYwNjgxNDMsNDEuNDQ0MTY5NCAxMC42MTYxMzAzLDQxLjg2NDU3MzMgMTAuNjE2MTMwMyw0MS44NjQ1NzMzIEMxMC4zMzI0MTY5LDQxLjQ1NDY3MSA5Ljg2NzQ2NTgsNDEuMjE5MDYxOSA5LjMzNzY0MTY5LDQxLjIxOTA2MTkgQzguOTk2MTY5MzgsNDEuMjE5MDYxOSA4LjczMTA4Nzk1LDQxLjMxMTAzNTggOC40Mjc3MjYzOCw0MS41MzY2NTE1IEM3Ljc4MzQwMDY1LDQyLjAxNzg2MzIgNy40NTIyNjA1OSw0Mi44MTc1MTE0IDcuNDUyMjYwNTksNDMuOTAzNzUyNCBDNy40NTIyNjA1OSw0NS41MzMwMjkzIDguMTUzMzI4OTksNDYuNDg2MzA2MiA5LjM3NDczNjE2LDQ2LjQ4NjMwNjIgQzkuOTI0NTQ3MjMsNDYuNDg2MzA2MiAxMC4yODQ5OTAyLDQ2LjMxMjY5MDYgMTAuNjI1NjE1Niw0NS44OTI2MjU0IEMxMC42MzQ5MzE2LDQ2LjE1ODIxNSAxMC43Mjk5NTQ0LDQ2LjQxNTMzNTUgMTAuNzI5OTU0NCw0Ni40MTUzMzU1IEwxMS40ODgxMDQyLDQ2LjQxNTMzNTUgQzExLjM4MzI1NzMsNDYuMTE3NTYzNSAxMS4zNDU5OTM1LDQ1LjY0NjE3NTkgMTEuMzQ1OTkzNSw0NC43NjU1NjM1IEwxMS4zNDU5OTM1LDM5LjM3Njg3MyBaIE0yMi42MjU5MjgzLDQxLjMyMTM2ODEgTDIzLjg0NDYyNTQsNDEuMzIxMzY4MSBMMjMuNjE3NjU0Nyw0MS45MjU4ODkzIEwyMi41OTc0NzIzLDQxLjkyNTg4OTMgTDIyLjU5NzQ3MjMsNDUuMjE1Nzc4NSBDMjIuNTk3NDcyMyw0NS43Nzk4MTc2IDIyLjczOTQxMzcsNDUuOTc0OTQ0NiAyMy4yMDM2ODczLDQ1Ljk3NDk0NDYgQzIzLjQxMjM2NDgsNDUuOTc0OTQ0NiAyMy4zNTczMTYsNDUuOTc3MzE2IDIzLjQ5MDI4MDEsNDUuOTA0OTkwMiBMMjMuNTk0Nzg4Myw0Ni40MTc4NzYyIEMyMy4zNTczMTYsNDYuNTUwNjcxIDIzLjI2OTkxNTMsNDYuNTg5MTIwNSAyMi45MzgwOTc3LDQ2LjU4OTEyMDUgQzIyLjY5MTk4Nyw0Ni41ODkxMjA1IDIyLjUwMjc4ODMsNDYuNTM4MzA2MiAyMi4zMjIzOTc0LDQ2LjQ0NjE2MjkgQzIxLjk5MTI1NzMsNDYuMjcxODY5NyAyMS44Njc3Nzg1LDQ1Ljk0Mzc3ODUgMjEuODY3Nzc4NSw0NS40MzEwNjE5IEwyMS44Njc3Nzg1LDQxLjkyNTg4OTMgTDIxLjI1MjI0NzYsNDEuOTI1ODg5MyBMMjEuMjUyMjQ3Niw0MS4zMjEzNjgxIEwyMS44Njc3Nzg1LDQxLjMyMTM2ODEgTDIxLjg2Nzc3ODUsMzkuMzg3NTQ0IEwyMi42MjU5MjgzLDM5LjM4NzU0NCBMMjIuNjI1OTI4Myw0MS4zMjEzNjgxIFogTTE4LjE5OTY2MTIsMjUuMTk5Njc0MyBMMjEuMzU2NDE2OSwyNC42NzU3Nzg1IEwyMS4zNTY0MTY5LDM3Ljc0Njc0OTIgTDE4LjE5OTY2MTIsMzcuNzQ2NzQ5MiBMMTguMTk5NjYxMiwyNS4xOTk2NzQzIFogTTE3Ljg0NTQ4NTMsMjEuNDU5MjMxMyBDMTcuODQ1NDg1MywyMC4zMTI1MjEyIDE4Ljc0MTE3MjYsMTkuMzg5Mzk0MSAxOS44MjQ3MDM2LDE5LjM4OTM5NDEgQzIwLjg4NTE5ODcsMTkuMzg5Mzk0MSAyMS43MzQzMDYyLDIwLjMxMjUyMTIgMjEuNzM0MzA2MiwyMS40NTkyMzEzIEMyMS43MzQzMDYyLDIyLjYwNjI4MDEgMjAuODYxMzE2LDIzLjUzMDA4NDcgMTkuNzc3Mjc2OSwyMy41MzAwODQ3IEMxOC43MTc3OTgsMjMuNTMwMDg0NyAxNy44NDU0ODUzLDIyLjYwNjI4MDEgMTcuODQ1NDg1MywyMS40NTkyMzEzIFogTTIwLjQ3NTEyNyw0MS45NDYzODQ0IEMyMC41NTA4NDA0LDQyLjEzMTAwOTggMjAuNTg4OTUxMSw0Mi4zMzU2MjIxIDIwLjU4ODk1MTEsNDIuNTQxMDgxNCBMMjAuNTg4OTUxMSw0Ni40MTU2NzQzIEwxOS44NDAxMTczLDQ2LjQxNTY3NDMgTDE5Ljg0MDExNzMsNDIuOTYxMTQ2NiBDMTkuODQwMTE3Myw0Mi40MTc2MDI2IDE5LjgwMjE3NTksNDIuMjg0OTc3MiAxOS42Njk1NTA1LDQyLjExMDM0NTMgQzE5LjU2NTcxOTksNDEuOTc3MzgxMSAxOS4zNjYxODg5LDQxLjg5NTA2MTkgMTkuMTQ4NTM0Miw0MS44OTUwNjE5IEMxOC43Njg5NTExLDQxLjg5NTA2MTkgMTguMTgyMzg0NCw0Mi4yMjM4MzA2IDE3Ljg0MTI1MDgsNDIuNjEyNzI5NiBMMTcuODQxMjUwOCw0Ni40MTU2NzQzIEwxNy4xMjEyMTE3LDQ2LjQxNTY3NDMgTDE3LjEyMTIxMTcsNDIuNDc5NzY1NSBDMTcuMTIxMjExNyw0MS43NTE3NjU1IDE2Ljk0MTY2NzgsNDEuNDAzMzQ4NSAxNi45NDE2Njc4LDQxLjQwMzM0ODUgTDE3LjY2MTAyOTMsNDEuMTg3ODk1OCBDMTcuNjYxMDI5Myw0MS4xODc4OTU4IDE3LjgzMjI3MzYsNDEuNTY2NDYyNSAxNy44MzIyNzM2LDQxLjk4NzU0NCBDMTguMzIzOTg3LDQxLjQ1NDY3MSAxOC44MTYzNzc5LDQxLjE5ODIyOCAxOS4zMTkxMDEsNDEuMTk4MjI4IEMxOS44MzA4MDEzLDQxLjE5ODIyOCAyMC4yODU3NTksNDEuNDk1ODMwNiAyMC40NzUxMjcsNDEuOTQ2Mzg0NCBaIE0xMy4xNTg3MTAxLDQzLjM5MTIwNTIgQzEzLjE5NTk3MzksNDIuMzM1MjgzNCAxMy41NzUyMTgyLDQxLjgwMjc0OTIgMTQuMjQ3NjYxMiw0MS44MDI3NDkyIEMxNC42MDgxMDQyLDQxLjgwMjc0OTIgMTQuOTM5MjQ0Myw0MS45NzczODExIDE1LjEwMDE1NjQsNDIuMjUzNjQxNyBDMTUuMjQyNDM2NSw0Mi40OTk1ODMxIDE1LjMwODgzMzksNDIuODM4MDA2NSAxNS4zMTgxNDk4LDQzLjM5MTIwNTIgTDEzLjE1ODcxMDEsNDMuMzkxMjA1MiBaIE0xNC4yODU2MDI2LDQxLjE3NzM5NDEgQzEzLjcxNjgyMDgsNDEuMTc3Mzk0MSAxMy4yNTI4ODYsNDEuNDAzMzQ4NSAxMi44NzM5ODA1LDQxLjg4NDcyOTYgQzEyLjQ3NjI3MzYsNDIuMzk4MTIzOCAxMi4zMDYwNDU2LDQyLjk1MDgxNDMgMTIuMzA2MDQ1Niw0My44MTE5NDc5IEMxMi4zMDYwNDU2LDQ1LjUwMzM4NzYgMTMuMDkxNjM1Miw0Ni41Mjc4MDQ2IDE0LjM5OTQyNjcsNDYuNTI3ODA0NiBDMTUuMDA1OTgwNSw0Ni41Mjc4MDQ2IDE1LjU3NDU5MjgsNDYuMzAyNTI3NyAxNS45OTA3NjIyLDQ1Ljg5MjYyNTQgTDE1LjcwNjM3MTMsNDUuMzc5NDAwNyBDMTUuMzc1MjMxMyw0NS43MDc4MzA2IDE1LjAwNTk4MDUsNDUuODYxMTIwNSAxNC41NTA2ODQsNDUuODYxMTIwNSBDMTQuMDc2NzU1Nyw0NS44NjExMjA1IDEzLjY0MTEwNzUsNDUuNjc3MDAzMyAxMy4zNzYwMjYxLDQ1LjIzNjI3MzYgQzEzLjIxNDc3NTIsNDQuOTcwNTE0NyAxMy4xNTg3MTAxLDQ0LjYwMDkyNTEgMTMuMTU4NzEwMSw0NC4xMTk1NDQgTDEzLjE1ODcxMDEsNDMuOTk2MDY1MSBMMTYuMTA0MjQ3Niw0My45OTYwNjUxIEwxNi4xMDQyNDc2LDQzLjg4MzI1NzMgQzE2LjA4NTk1NDQsNDIuNjY0MjIxNSAxNS45NzE0NTI4LDQyLjE4MjMzMjIgMTUuNTY1MTA3NSw0MS43MzA3NjIyIEMxNS4yNDI0MzY1LDQxLjM3MjY5MDYgMTQuNzk3MTMzNiw0MS4xNzczOTQxIDE0LjI4NTYwMjYsNDEuMTc3Mzk0MSBaIE01LjY2MTM5NDE0LDQ2LjQxNTMzNTUgTDYuNDE5NTQzOTcsNDYuNDE1MzM1NSBMNi40MTk1NDM5NywzOS4zODQxNTY0IEw1LjY2MTM5NDE0LDM5LjM4NDE1NjQgTDUuNjYxMzk0MTQsNDYuNDE1MzM1NSBaIE0xMi44NzA3NjIyLDI3LjYxOTk2MDkgQzEyLjQyNDQ0MywyOC4zNDMyMTgyIDEyLjAyMzM0ODUsMjguNTE4MDE5NSAxMC42ODA0OTUxLDI4LjUxODAxOTUgTDguOTYwNTk5MzUsMjguNTE4MDE5NSBMOC45NjA1OTkzNSwyMy4yMjk3NzIgTDExLjA1NjAxMywyMy4yMjk3NzIgQzEyLjQ0NzMwOTQsMjMuMjI5NzcyIDEzLjI3MTUxNzksMjQuMjAyODY2NCAxMy4yNzE1MTc5LDI1LjgyMzg0MzYgQzEzLjI3MTUxNzksMjYuNjQ3NzEzNCAxMy4xNTUxNTMxLDI3LjE0NzM4NzYgMTIuODcwNzYyMiwyNy42MTk5NjA5IFogTTE0LjUyMjIyOCwyMS4yNjAwMzkxIEMxMy42MDE5ODA1LDIwLjcxMDkwNTUgMTIuNzUzMjExNywyMC40MTIyODY2IDkuOTcyOTkwMjMsMjAuNDEyMjg2NiBMNS42NjEzOTQxNCwyMC40MTIyODY2IEw1LjY2MTM5NDE0LDM3Ljc0Njc0OTIgTDguOTYwNTk5MzUsMzcuNzQ2NzQ5MiBMOC45NjA1OTkzNSwzMS4zNjE3NTkgTDEwLjc3NDMzMjIsMzEuMzYxNzU5IEMxMi41ODgwNjUxLDMxLjM2MTc1OSAxMy4yOTU3Mzk0LDMxLjE2MTg4OTMgMTQuMDQ5OTkzNSwzMC43ODc3MjY0IEMxNS44NDAzNTE4LDI5Ljg5MDE3NTkgMTYuODc1OTQ3OSwyOC4wNDQyNjA2IDE2Ljg3NTk0NzksMjUuNzUwNTAxNiBDMTYuODc1OTQ3OSwyMy43NTQwMDY1IDE2LjA1MjA3ODIsMjIuMTU4MjY3MSAxNC41MjIyMjgsMjEuMjYwMDM5MSBMMTQuNTIyMjI4LDIxLjI2MDAzOTEgWiIgaWQ9IkZpbGwtMyIgZmlsbD0iI0ZGRkZGRSI+PC9wYXRoPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==";

class UserNav extends React.Component {
    bodyNode = typeof document !== "undefined" ? document.body : {};
    state = { menuOpen: false };

    initialBodyClassNames = `${this.bodyNode.className}`;

    _setMenuOpen = (menuOpen) => {
        if (menuOpen !== this.state.menuOpen) {
            this.setState({ menuOpen }, () => {
                this.bodyNode.className = classnames(this.initialBodyClassNames, {
                    [MENU_OPEN_CLASSNAME]: menuOpen
                });
            });
        }
    };

    _toggleCollapsibleMenu = () => {
        this._setMenuOpen(!this.state.menuOpen);
    }

    _handleSignOut = () => {
        const { onSignOut } = this.props;
        this._setMenuOpen(false);
        onSignOut();
    }

    _handleTabChange = (tab, e) => {
        const { onTabChange } = this.props;
        this._setMenuOpen(false);
        onTabChange(tab, e);
    }

    componentWillUnmount() {
        this.bodyNode.className = this.initialBodyClassNames;
    }

    render() {
        const { tabs, selectedTabIndex, logo, user } = this.props;
        const { menuOpen } = this.state;
        return (
            <div className="user-nav">
                {logo &&
                    <div
                        className="user-nav__logo"
                    >
                    {
                        logo === true ?
                          <img
                            src={pingLogo}
                            style={{ width: 50, height: 50 }}
                          /> :
                          <img src={logo}/>
                    }
                    </div>
                }
                <div
                    className={classnames(
                        "user-nav__collapsible-trigger",
                        { "user-nav__collapsible-trigger--open": menuOpen }
                    )}
                    data-id="collapsible-trigger"
                    onClick={this._toggleCollapsibleMenu}
                >
                    <span />
                </div>
                {
                    menuOpen &&
                    <div
                        className="modal show user-nav__modal-bg"
                        data-id="show-modal"
                        onClick={this._toggleCollapsibleMenu}
                    >
                        <div className="modal-bg" />
                    </div>
                }
                <div className={classnames(
                    "user-nav__collapsible-menu",
                    { "user-nav__collapsible-menu--open": menuOpen }
                )}>

                    <Tabs
                        activeTab={selectedTabIndex}
                        onChange={this._handleTabChange}
                        tabs={tabs}
                    />
                    <hr />
                    <Link
                        className="user-nav__mobile-sign-out"
                        title="Sign Out"
                        type="block"
                        onClick={this._handleSignOut}
                    />
                    <PopOverNavMenu
                        flags={["use-portal"]}
                        className="user-nav__dropdown-menu"
                        label={<UserInfo className="user-nav__info" {...user} />}
                        items={[
                            {
                                label: "Sign Out",
                                onClick: this._handleSignOut,
                            }
                        ]}
                    />
                </div>

            </div>

        );
    }
}

UserNav.propTypes = {
    logo: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),
    menu: PropTypes.bool,
    tabs: PropTypes.arrayOf(PropTypes.string),
    user: PropTypes.shape({}),
};

UserNav.defaultProps = {
    logo: false,
    menu: false,
    tabs: [],
    onSignOut: () => { },
    user: {},
};

UserInfo.propTypes = {
    imageSrc: PropTypes.string,
    imageSize:PropTypes.oneOf(Object.values(imageSizes)),
    name: PropTypes.string,
    className: PropTypes.string,
}

UserInfo.defaultProps = {
    imageSize: imageSizes.SMALL,
    name: "",
    imageSrc: null,
}

export default UserNav;

